<!doctype html><html lang=tr dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>FastAPI Uygulamasına Çoklu Dil Desteği Ekleme | Ali Eren Öztürk</title><meta name=keywords content="fastapi"><meta name=description content="Merhaba!
Bu blog yazısında, FastAPI uygulamanızda dil çevirilerini Gettext kullanarak nasıl yapılandıracağınızı öğreneceksiniz. Gettext, dil desteği eklemek için oldukça etkili bir araçtır ve modern web uygulamaları için harika bir seçenektir.
Aşağıdaki gibi bir uygulamamız olduğunu varsayalım ve buna çeviri desteği eklemeyi adım adım oluşturalım.
# main.py from fastapi import FastAPI app = FastAPI() @app.get(&#34;/&#34;) async def read_root(): message = &#34;Merhaba, Dünya!&#34; return {&#34;message&#34;: message} Adım 1: Paket kurulumu İlk adım olarak, Gettext&rsquo;i FastAPI uygulamanıza eklemek için babel kütüphanesini yüklemeniz gerekecek."><meta name=author content="Ali Eren Öztürk"><link rel=canonical href=https://alieren.dev/tr/posts/fastapi-setting-gettext-translations-tr/><link crossorigin=anonymous href=/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://alieren.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://alieren.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://alieren.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://alieren.dev/apple-touch-icon.png><link rel=mask-icon href=https://alieren.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=tr href=https://alieren.dev/tr/posts/fastapi-setting-gettext-translations-tr/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="FastAPI Uygulamasına Çoklu Dil Desteği Ekleme"><meta property="og:description" content="Merhaba!
Bu blog yazısında, FastAPI uygulamanızda dil çevirilerini Gettext kullanarak nasıl yapılandıracağınızı öğreneceksiniz. Gettext, dil desteği eklemek için oldukça etkili bir araçtır ve modern web uygulamaları için harika bir seçenektir.
Aşağıdaki gibi bir uygulamamız olduğunu varsayalım ve buna çeviri desteği eklemeyi adım adım oluşturalım.
# main.py from fastapi import FastAPI app = FastAPI() @app.get(&#34;/&#34;) async def read_root(): message = &#34;Merhaba, Dünya!&#34; return {&#34;message&#34;: message} Adım 1: Paket kurulumu İlk adım olarak, Gettext&rsquo;i FastAPI uygulamanıza eklemek için babel kütüphanesini yüklemeniz gerekecek."><meta property="og:type" content="article"><meta property="og:url" content="https://alieren.dev/tr/posts/fastapi-setting-gettext-translations-tr/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-07-30T19:34:18+03:00"><meta property="article:modified_time" content="2023-07-30T19:34:18+03:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="FastAPI Uygulamasına Çoklu Dil Desteği Ekleme"><meta name=twitter:description content="Merhaba!
Bu blog yazısında, FastAPI uygulamanızda dil çevirilerini Gettext kullanarak nasıl yapılandıracağınızı öğreneceksiniz. Gettext, dil desteği eklemek için oldukça etkili bir araçtır ve modern web uygulamaları için harika bir seçenektir.
Aşağıdaki gibi bir uygulamamız olduğunu varsayalım ve buna çeviri desteği eklemeyi adım adım oluşturalım.
# main.py from fastapi import FastAPI app = FastAPI() @app.get(&#34;/&#34;) async def read_root(): message = &#34;Merhaba, Dünya!&#34; return {&#34;message&#34;: message} Adım 1: Paket kurulumu İlk adım olarak, Gettext&rsquo;i FastAPI uygulamanıza eklemek için babel kütüphanesini yüklemeniz gerekecek."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://alieren.dev/tr/posts/"},{"@type":"ListItem","position":2,"name":"FastAPI Uygulamasına Çoklu Dil Desteği Ekleme","item":"https://alieren.dev/tr/posts/fastapi-setting-gettext-translations-tr/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"FastAPI Uygulamasına Çoklu Dil Desteği Ekleme","name":"FastAPI Uygulamasına Çoklu Dil Desteği Ekleme","description":"Merhaba!\nBu blog yazısında, FastAPI uygulamanızda dil çevirilerini Gettext kullanarak nasıl yapılandıracağınızı öğreneceksiniz. Gettext, dil desteği eklemek için oldukça etkili bir araçtır ve modern web uygulamaları için harika bir seçenektir.\nAşağıdaki gibi bir uygulamamız olduğunu varsayalım ve buna çeviri desteği eklemeyi adım adım oluşturalım.\n# main.py from fastapi import FastAPI app = FastAPI() @app.get(\u0026quot;/\u0026quot;) async def read_root(): message = \u0026quot;Merhaba, Dünya!\u0026quot; return {\u0026quot;message\u0026quot;: message} Adım 1: Paket kurulumu İlk adım olarak, Gettext\u0026rsquo;i FastAPI uygulamanıza eklemek için babel kütüphanesini yüklemeniz gerekecek.","keywords":["fastapi"],"articleBody":"Merhaba!\nBu blog yazısında, FastAPI uygulamanızda dil çevirilerini Gettext kullanarak nasıl yapılandıracağınızı öğreneceksiniz. Gettext, dil desteği eklemek için oldukça etkili bir araçtır ve modern web uygulamaları için harika bir seçenektir.\nAşağıdaki gibi bir uygulamamız olduğunu varsayalım ve buna çeviri desteği eklemeyi adım adım oluşturalım.\n# main.py from fastapi import FastAPI app = FastAPI() @app.get(\"/\") async def read_root(): message = \"Merhaba, Dünya!\" return {\"message\": message} Adım 1: Paket kurulumu İlk adım olarak, Gettext’i FastAPI uygulamanıza eklemek için babel kütüphanesini yüklemeniz gerekecek. Gereksinimleri karşılamak için aşağıdaki komutu kullanabilirsiniz:\npip install babel Adım 2: Çevirilecek Metinleri İşaretleyin Çeviri yapmak istediğiniz metinleri işaretlemek için gettext fonksiyonunu kullanacağız. Bu değişken, metinleri çeviri için hazırlayacak. Örneğin, FastAPI uygulamanızda şu şekilde kullanabilirsiniz:\n# main.py from fastapi import FastAPI from gettext import gettext as _ app = FastAPI() @app.get(\"/\") async def read_root(): message = _(\"Merhaba, Dünya!\") return {\"message\": message} Adım 3: Çeviri Dosyalarını Oluşturun Metinleri işaretledikten sonra, çeviri dosyalarınızı oluşturmanız gerekecek. Bu dosyalar, çeviri yapılan metinleri belirli dillere göre saklayacaktır. Çeviri dosyalarınızı oluşturmak için babel paketini kullanabilirsiniz. Aşağıdaki komutları çalıştırarak çeviri dosyalarınızı oluşturabilirsiniz:\n# daha düzenli bir yapı için tüm dil dosyalarını bir klasörde tutalım mkdir languages # Örnek olarak main.py dosyasındaki çevirileri extract edelim pybabel extract -o languages/messages.pot main.py # Uygulamanın destekleyeceği dillerin çeviri dosyalarını init edelim pybabel init -l en_US -i languages/messages.pot -d languages pybabel init -l tr_TR -i languages/messages.pot -d languages Adım 4: Çevirileri Yapın .po uzantılı dosyalar, çevirilerinizi belirli bir dile çevirmenize olanak tanır. Çeviri işlemi tamamlandıktan sonra, bu dosyalar .mo uzantısına dönüştürülecektir. Çeviri dosyalarınızı düzenlemek ve çevirileri yapmak için bir metin düzenleyici veya çeviri aracı kullanabilirsiniz.\nÖrnek olarak languages/en_US/LC_MESSAGES/messages.po aşağıdaki gibi değiştirelim:\n#: main.py:8 msgid \"Merhaba, Dünya!\" msgstr \"Hello, World!\" Çevirileri tamamladıktan sonra compile edilmesi gerekiyor, aşağıdaki komut ile compile edelim:\npybabel compile -d languages Adım 5: Çevirileri Uygulamaya Ekleyin Çeviri dosyalarınızı tamamladıktan sonra, uygulamanızda çeviri desteğini etkinleştirebilirsiniz. Bunu yapmak için aşağıdaki kodu uygulamanıza ekleyebilirsiniz:\n# main.py from fastapi import FastAPI from gettext import translation app = FastAPI() # Çeviri dosyalarınızın yolu ve dili belirtin trans = translation('messages', 'languages', languages=['en_US']) trans.install() @app.get(\"/\") async def read_root(): message = _(\"Merhaba, Dünya!\") return {\"message\": message} Artık uygulamamız en_US dosyasındaki çeviri ile response dönüyor. Fakat şuandaki yapı kullanıcıdan alınan veriye göre dinamik bir response dönmüyor.\nAdım 6: Dil ayarını değiştirilebilir yapmak Kullanıcı diline göre response’u değiştirmek için öncelikle kullanıcıdan bir dil ayarı alalım. Bu ayarı alacağınız yeri ihtiyacınıza göre değiştirebilirsiniz, biz örneğin basit kalması açısından Header’dan alalım. Bunun için bir Middleware yazalım.\n# main.py from fastapi import FastAPI, Request from gettext import translation app = FastAPI() default_language = \"tr_TR\" languages = { \"en\": \"en_US\", \"tr\": \"tr_TR\", } def get_language(request: Request): user_language = request.headers.get('accept-language', 'en') return languages.get(user_language, default_language) @app.middleware(\"http\") async def add_gettext_middleware(request: Request, call_next): language = get_language(request) trans = translation('messages', 'languages', languages=[language]) trans.install() response = await call_next(request) return response @app.get(\"/\") async def read_root(): message = _(\"Merhaba, Dünya!\") return {\"message\": message} Artık FastAPI uygulamanız kullanıcının header’da gönderdiği dil bilgisine göre dinamik çeviri yapacak ve kullanıcılara tercih ettikleri dillerde içerik sunacaktır. Test etmek için alttaki şekilde curl isteği atabilirsiniz:\n# İngilizce response için curl -X 'GET' \\ 'http://127.0.0.1:8000' \\ -H 'accept-language: en' # Türkçe response için curl -X 'GET' \\ 'http://127.0.0.1:8000' \\ -H 'accept-language: tr' Sonuç Bu yazıda, FastAPI uygulamanızda Gettext ile çeviri ayarlarını nasıl yapılandıracağınızı öğrendiniz. Gettext sayesinde uygulamanızı daha fazla kullanıcı için daha erişilebilir hale getirebilir ve çok dilli içerik sunabilirsiniz. FastAPI ve Gettext kombinasyonu, uygulamanızı daha geniş bir kitleye ulaştırmak için güçlü bir araçtır.\nGörüşmek üzere!\n","wordCount":"569","inLanguage":"tr","datePublished":"2023-07-30T19:34:18+03:00","dateModified":"2023-07-30T19:34:18+03:00","author":{"@type":"Person","name":"Ali Eren Öztürk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://alieren.dev/tr/posts/fastapi-setting-gettext-translations-tr/"},"publisher":{"@type":"Organization","name":"Ali Eren Öztürk","logo":{"@type":"ImageObject","url":"https://alieren.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://alieren.dev/tr/ accesskey=h title="Ali Eren Öztürk (Alt + H)">Ali Eren Öztürk</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://alieren.dev/ title=English aria-label=English>English</a></li></ul></div></div><ul id=menu><li><a href=https://alieren.dev/tr/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://alieren.dev/tr/categories/ title=Kategoriler><span>Kategoriler</span></a></li><li><a href=https://alieren.dev/tr/search/ title=Arama><span>Arama</span></a></li><li><a href=https://github.com/aliereno title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.linkedin.com/in/alierenozturk/ title=LinkedIn><span>LinkedIn</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>FastAPI Uygulamasına Çoklu Dil Desteği Ekleme</h1><div class=post-meta><span title='2023-07-30 19:34:18 +0300 +0300'>Temmuz 30, 2023</span>&nbsp;·&nbsp;3 dk&nbsp;·&nbsp;Ali Eren Öztürk&nbsp;|&nbsp;<a href=https://github.com/aliereno/site/blob/main/content/posts/fastapi-i18n.tr.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>İçindekiler</span></summary><div class=inner><ul><li><a href=#ad%c4%b1m-1-paket-kurulumu aria-label="Adım 1: Paket kurulumu">Adım 1: Paket kurulumu</a></li><li><a href=#ad%c4%b1m-2-%c3%a7evirilecek-metinleri-i%c5%9faretleyin aria-label="Adım 2: Çevirilecek Metinleri İşaretleyin">Adım 2: Çevirilecek Metinleri İşaretleyin</a></li><li><a href=#ad%c4%b1m-3-%c3%a7eviri-dosyalar%c4%b1n%c4%b1-olu%c5%9fturun aria-label="Adım 3: Çeviri Dosyalarını Oluşturun">Adım 3: Çeviri Dosyalarını Oluşturun</a></li><li><a href=#ad%c4%b1m-4-%c3%a7evirileri-yap%c4%b1n aria-label="Adım 4: Çevirileri Yapın">Adım 4: Çevirileri Yapın</a></li><li><a href=#ad%c4%b1m-5-%c3%a7evirileri-uygulamaya-ekleyin aria-label="Adım 5: Çevirileri Uygulamaya Ekleyin">Adım 5: Çevirileri Uygulamaya Ekleyin</a></li><li><a href=#ad%c4%b1m-6-dil-ayar%c4%b1n%c4%b1-de%c4%9fi%c5%9ftirilebilir-yapmak aria-label="Adım 6: Dil ayarını değiştirilebilir yapmak">Adım 6: Dil ayarını değiştirilebilir yapmak</a></li><li><a href=#sonu%c3%a7 aria-label=Sonuç>Sonuç</a></li></ul></div></details></div><div class=post-content><p>Merhaba!</p><p>Bu blog yazısında, FastAPI uygulamanızda dil çevirilerini Gettext kullanarak nasıl yapılandıracağınızı öğreneceksiniz. Gettext, dil desteği eklemek için oldukça etkili bir araçtır ve modern web uygulamaları için harika bir seçenektir.</p><p>Aşağıdaki gibi bir uygulamamız olduğunu varsayalım ve buna çeviri desteği eklemeyi adım adım oluşturalım.</p><pre><code class=language-python># main.py

from fastapi import FastAPI

app = FastAPI()

@app.get(&quot;/&quot;)
async def read_root():
    message = &quot;Merhaba, Dünya!&quot;
    return {&quot;message&quot;: message}
</code></pre><h2 id=adım-1-paket-kurulumu>Adım 1: Paket kurulumu<a hidden class=anchor aria-hidden=true href=#adım-1-paket-kurulumu>#</a></h2><p>İlk adım olarak, Gettext&rsquo;i FastAPI uygulamanıza eklemek için <code>babel</code> kütüphanesini yüklemeniz gerekecek. Gereksinimleri karşılamak için aşağıdaki komutu kullanabilirsiniz:</p><pre><code class=language-bash>pip install babel
</code></pre><h2 id=adım-2-çevirilecek-metinleri-işaretleyin>Adım 2: Çevirilecek Metinleri İşaretleyin<a hidden class=anchor aria-hidden=true href=#adım-2-çevirilecek-metinleri-işaretleyin>#</a></h2><p>Çeviri yapmak istediğiniz metinleri işaretlemek için gettext fonksiyonunu kullanacağız. Bu değişken, metinleri çeviri için hazırlayacak. Örneğin, FastAPI uygulamanızda şu şekilde kullanabilirsiniz:</p><pre><code class=language-python># main.py

from fastapi import FastAPI
from gettext import gettext as _

app = FastAPI()

@app.get(&quot;/&quot;)
async def read_root():
    message = _(&quot;Merhaba, Dünya!&quot;)
    return {&quot;message&quot;: message}
</code></pre><h2 id=adım-3-çeviri-dosyalarını-oluşturun>Adım 3: Çeviri Dosyalarını Oluşturun<a hidden class=anchor aria-hidden=true href=#adım-3-çeviri-dosyalarını-oluşturun>#</a></h2><p>Metinleri işaretledikten sonra, çeviri dosyalarınızı oluşturmanız gerekecek. Bu dosyalar, çeviri yapılan metinleri belirli dillere göre saklayacaktır. Çeviri dosyalarınızı oluşturmak için babel paketini kullanabilirsiniz. Aşağıdaki komutları çalıştırarak çeviri dosyalarınızı oluşturabilirsiniz:</p><pre><code class=language-bash># daha düzenli bir yapı için tüm dil dosyalarını bir klasörde tutalım
mkdir languages

# Örnek olarak main.py dosyasındaki çevirileri extract edelim
pybabel extract -o languages/messages.pot main.py

# Uygulamanın destekleyeceği dillerin çeviri dosyalarını init edelim
pybabel init -l en_US -i languages/messages.pot -d languages
pybabel init -l tr_TR -i languages/messages.pot -d languages 
</code></pre><h2 id=adım-4-çevirileri-yapın>Adım 4: Çevirileri Yapın<a hidden class=anchor aria-hidden=true href=#adım-4-çevirileri-yapın>#</a></h2><p>.po uzantılı dosyalar, çevirilerinizi belirli bir dile çevirmenize olanak tanır. Çeviri işlemi tamamlandıktan sonra, bu dosyalar .mo uzantısına dönüştürülecektir. Çeviri dosyalarınızı düzenlemek ve çevirileri yapmak için bir metin düzenleyici veya çeviri aracı kullanabilirsiniz.</p><p>Örnek olarak <code>languages/en_US/LC_MESSAGES/messages.po</code> aşağıdaki gibi değiştirelim:</p><pre><code>#: main.py:8
msgid &quot;Merhaba, Dünya!&quot;
msgstr &quot;Hello, World!&quot;
</code></pre><p>Çevirileri tamamladıktan sonra compile edilmesi gerekiyor, aşağıdaki komut ile compile edelim:</p><pre><code class=language-bash>pybabel compile -d languages
</code></pre><h2 id=adım-5-çevirileri-uygulamaya-ekleyin>Adım 5: Çevirileri Uygulamaya Ekleyin<a hidden class=anchor aria-hidden=true href=#adım-5-çevirileri-uygulamaya-ekleyin>#</a></h2><p>Çeviri dosyalarınızı tamamladıktan sonra, uygulamanızda çeviri desteğini etkinleştirebilirsiniz. Bunu yapmak için aşağıdaki kodu uygulamanıza ekleyebilirsiniz:</p><pre><code class=language-python># main.py

from fastapi import FastAPI
from gettext import translation

app = FastAPI()

# Çeviri dosyalarınızın yolu ve dili belirtin
trans = translation('messages', 'languages', languages=['en_US'])
trans.install()


@app.get(&quot;/&quot;)
async def read_root():
    message = _(&quot;Merhaba, Dünya!&quot;)
    return {&quot;message&quot;: message}
</code></pre><p>Artık uygulamamız en_US dosyasındaki çeviri ile response dönüyor. Fakat şuandaki yapı kullanıcıdan alınan veriye göre dinamik bir response dönmüyor.</p><h2 id=adım-6-dil-ayarını-değiştirilebilir-yapmak>Adım 6: Dil ayarını değiştirilebilir yapmak<a hidden class=anchor aria-hidden=true href=#adım-6-dil-ayarını-değiştirilebilir-yapmak>#</a></h2><p>Kullanıcı diline göre response&rsquo;u değiştirmek için öncelikle kullanıcıdan bir dil ayarı alalım. Bu ayarı alacağınız yeri ihtiyacınıza göre değiştirebilirsiniz, biz örneğin basit kalması açısından Header&rsquo;dan alalım. Bunun için bir Middleware yazalım.</p><pre><code class=language-python># main.py

from fastapi import FastAPI, Request
from gettext import translation

app = FastAPI()

default_language = &quot;tr_TR&quot;
languages = {
    &quot;en&quot;: &quot;en_US&quot;,
    &quot;tr&quot;: &quot;tr_TR&quot;,
}

def get_language(request: Request):
    user_language = request.headers.get('accept-language', 'en')
    return languages.get(user_language, default_language)

@app.middleware(&quot;http&quot;)
async def add_gettext_middleware(request: Request, call_next):
    language = get_language(request)
    trans = translation('messages', 'languages', languages=[language])
    trans.install()
    response = await call_next(request)
    return response


@app.get(&quot;/&quot;)
async def read_root():
    message = _(&quot;Merhaba, Dünya!&quot;)
    return {&quot;message&quot;: message}
</code></pre><p>Artık FastAPI uygulamanız kullanıcının header&rsquo;da gönderdiği dil bilgisine göre dinamik çeviri yapacak ve kullanıcılara tercih ettikleri dillerde içerik sunacaktır. Test etmek için alttaki şekilde curl isteği atabilirsiniz:</p><pre><code class=language-bash># İngilizce response için
curl -X 'GET' \
  'http://127.0.0.1:8000' \
  -H 'accept-language: en'

# Türkçe response için
curl -X 'GET' \
  'http://127.0.0.1:8000' \
  -H 'accept-language: tr'
</code></pre><h2 id=sonuç>Sonuç<a hidden class=anchor aria-hidden=true href=#sonuç>#</a></h2><p>Bu yazıda, FastAPI uygulamanızda Gettext ile çeviri ayarlarını nasıl yapılandıracağınızı öğrendiniz. Gettext sayesinde uygulamanızı daha fazla kullanıcı için daha erişilebilir hale getirebilir ve çok dilli içerik sunabilirsiniz. FastAPI ve Gettext kombinasyonu, uygulamanızı daha geniş bir kitleye ulaştırmak için güçlü bir araçtır.</p><p>Görüşmek üzere!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://alieren.dev/tr/tags/fastapi/>fastapi</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://alieren.dev/tr/>Ali Eren Öztürk</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Kopyala";function s(){t.innerHTML="Kopyalandı!",setTimeout(()=>{t.innerHTML="Kopyala"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>